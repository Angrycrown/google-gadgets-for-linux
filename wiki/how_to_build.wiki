#How to build this project

= Introduction =

This page describe the method of building google gadgets for linux from source code.


= Details =

== Prepare the source code ==
Currently you can only get the source code from the svn repository. Please follow the instruction on [http://code.google.com/p/google-gadgets-for-linux/source Source] page to check out it.

== Build with autoconf/automake ==

=== Pre-requirement ===
You need install following packages in order to prepare and build the source code.
 * [http://www.gnu.org/software/autoconf/ autoconf] >= 2.50 
 * [http://www.gnu.org/software/automake/ automake] >= 1.9
 * [http://www.gnu.org/software/libtool libtool] >= 1.5.20
 * [http://www.mozilla.org/js/spidermonkey/ SpiderMonkey] >= 1.60
 * [http://curl.haxx.se/ libcurl] >= 7.16.0
 * [http://xmlsoft.org libxml2] >= 2.6.0
 * [http://cairographics.org cairo] >= 1.0.0
 * [http://www.gtk.org gtk] >= 2.8.0
 * [http://www.zlib.net zlib] >= 1.2.0

=== Prepare build environment ===
Change to the root directory of the source code, then run:
{{{
sh autotools/bootstrap.sh
}}}

If everything is ok, a configure script will be generated in current directory. Then you can start to configure and build. Otherwise please check if there is some package missing in your system or the version is too low, especailly autoconf, automake and libtool packages.

=== Configure and build ===
autoconf/automake supports building inside source tree and outside source tree. We suggest to build outside source tree.
You can create a directory and build it in that directory, then all files will be output into that directory. The source tree won't be touched at all.
Following commands configure and build google gadgets for linux in build/debug directory with default configure options.
{{{
$ mkdir -p build/debug
$ cd build/debug
$ ../../configure --enable-debug
$ make
}}}

The configure script has many options that you can use, use command:
{{{
../../configure --help
}}}
To get a detailed list.
For example, if the spidermonkey library was not installed into system standard library directory, you may want to use --with-smjs-incdir and --with-smjs-libdir options to specify the include and library directory of installed spidermonkey library.

=== Install, run and do unit tests ===
If the configure and build finished successfully, you can either install it or run it directly.

Use command:
{{{
$ make install
}}}
to install google gadgets for linux into the default installation directory, /usr/local. Use --prefix configure option to change the default directory.

If you want to make binary package instead of install it into system, you may use this command:
{{{
$ make DESTDIR=</tmp/ggl-root> install
}}}
Then all things will be installed into /tmp/ggl-root directory. Then you can just pack everything in this directory altogether into a package.

If you want to run all unit tests, just use this command:
{{{
$ make check
}}}